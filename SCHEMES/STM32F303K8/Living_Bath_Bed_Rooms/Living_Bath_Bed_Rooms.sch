EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 1
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L MCU_ST_STM32F3:STM32F303K8Tx U1
U 1 1 60E6B2B7
P 3050 2500
F 0 "U1" H 3000 1411 50  0000 C CNN
F 1 "STM32F303K8Tx" H 3000 1320 50  0000 C CNN
F 2 "Package_QFP:LQFP-32_7x7mm_P0.8mm" H 2550 1600 50  0001 R CNN
F 3 "http://www.st.com/st-web-ui/static/active/en/resource/technical/document/datasheet/DM00092070.pdf" H 3050 2500 50  0001 C CNN
	1    3050 2500
	1    0    0    -1  
$EndComp
$Comp
L Motor:Motor_DC M1
U 1 1 60E6DE2C
P 5400 1600
F 0 "M1" H 5558 1596 50  0000 L CNN
F 1 "Ceiling_Fan" H 5558 1505 50  0000 L CNN
F 2 "" H 5400 1510 50  0001 C CNN
F 3 "~" H 5400 1510 50  0001 C CNN
	1    5400 1600
	1    0    0    -1  
$EndComp
$Comp
L Device:D_Schottky D1
U 1 1 60E6E573
P 4950 1650
F 0 "D1" V 4904 1730 50  0000 L CNN
F 1 "D_Sch" V 4995 1730 50  0000 L CNN
F 2 "" H 4950 1650 50  0001 C CNN
F 3 "~" H 4950 1650 50  0001 C CNN
	1    4950 1650
	0    1    1    0   
$EndComp
$Comp
L Device:Q_NMOS_DGS Q1
U 1 1 60E6F272
P 5300 2100
F 0 "Q1" H 5504 2146 50  0000 L CNN
F 1 "Q_NMOS_DGS" H 5504 2055 50  0000 L CNN
F 2 "" H 5500 2200 50  0001 C CNN
F 3 "~" H 5300 2100 50  0001 C CNN
	1    5300 2100
	1    0    0    -1  
$EndComp
$Comp
L Device:R R1
U 1 1 60E6FFDB
P 6650 1800
F 0 "R1" H 6720 1846 50  0000 L CNN
F 1 "1k" H 6720 1755 50  0000 L CNN
F 2 "" V 6580 1800 50  0001 C CNN
F 3 "~" H 6650 1800 50  0001 C CNN
	1    6650 1800
	1    0    0    -1  
$EndComp
$Comp
L Device:LED D_Liv
U 1 1 60E7063E
P 6650 1500
F 0 "D_Liv" V 6689 1382 50  0000 R CNN
F 1 "LED" V 6598 1382 50  0000 R CNN
F 2 "" H 6650 1500 50  0001 C CNN
F 3 "~" H 6650 1500 50  0001 C CNN
	1    6650 1500
	0    -1   -1   0   
$EndComp
$Comp
L power:+3.3V #PWR?
U 1 1 60E7132A
P 5400 1400
F 0 "#PWR?" H 5400 1250 50  0001 C CNN
F 1 "+3.3V" H 5415 1573 50  0000 C CNN
F 2 "" H 5400 1400 50  0001 C CNN
F 3 "" H 5400 1400 50  0001 C CNN
	1    5400 1400
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 60E72096
P 6650 1950
F 0 "#PWR?" H 6650 1700 50  0001 C CNN
F 1 "GND" H 6655 1777 50  0000 C CNN
F 2 "" H 6650 1950 50  0001 C CNN
F 3 "" H 6650 1950 50  0001 C CNN
	1    6650 1950
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 60E725B3
P 5400 2550
F 0 "#PWR?" H 5400 2300 50  0001 C CNN
F 1 "GND" H 5405 2377 50  0000 C CNN
F 2 "" H 5400 2550 50  0001 C CNN
F 3 "" H 5400 2550 50  0001 C CNN
	1    5400 2550
	1    0    0    -1  
$EndComp
Wire Wire Line
	4950 1400 4950 1500
Wire Wire Line
	4950 1800 4950 1900
$Comp
L Switch:SW_DPST_x2 SW_Liv
U 1 1 60E7409A
P 6500 2550
F 0 "SW_Liv" H 6500 2785 50  0000 C CNN
F 1 "SW_DPST" H 6500 2694 50  0000 C CNN
F 2 "" H 6500 2550 50  0001 C CNN
F 3 "~" H 6500 2550 50  0001 C CNN
	1    6500 2550
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 60E75212
P 6700 2650
F 0 "#PWR?" H 6700 2400 50  0001 C CNN
F 1 "GND" H 6705 2477 50  0000 C CNN
F 2 "" H 6700 2650 50  0001 C CNN
F 3 "" H 6700 2650 50  0001 C CNN
	1    6700 2650
	1    0    0    -1  
$EndComp
Wire Wire Line
	6700 2550 6700 2650
Wire Wire Line
	4950 1400 5400 1400
Connection ~ 5400 1400
Text GLabel 4650 2100 0    50   Input ~ 0
FAN
$Comp
L Device:R R2
U 1 1 60E774C7
P 5100 2350
F 0 "R2" H 5170 2396 50  0000 L CNN
F 1 "10k" H 5170 2305 50  0000 L CNN
F 2 "" V 5030 2350 50  0001 C CNN
F 3 "~" H 5100 2350 50  0001 C CNN
	1    5100 2350
	1    0    0    -1  
$EndComp
Wire Wire Line
	5100 2500 5400 2500
Text GLabel 3550 1900 2    50   Input ~ 0
FAN
Text GLabel 3550 1800 2    50   Input ~ 0
BUZZER
Text GLabel 3550 2100 2    50   Input ~ 0
FLOOD_ALARM
Text GLabel 3550 2200 2    50   Input ~ 0
HUMIDITY
Text GLabel 2450 2900 0    50   Input ~ 0
SPI1_SCK
Text GLabel 2450 3000 0    50   Input ~ 0
SPI1_MISO
Text GLabel 2450 3100 0    50   Input ~ 0
SPI1_MOSI
Text GLabel 3550 2600 2    50   Input ~ 0
RST
Text GLabel 3550 3000 2    50   Input ~ 0
BUZZER_OFF
Text GLabel 3550 2400 2    50   Input ~ 0
MOTION_BATH
Text GLabel 3550 2300 2    50   Input ~ 0
MOTION_LIVING
Text GLabel 3550 2500 2    50   Input ~ 0
MOTION_BED
Text GLabel 3550 2900 2    50   Input ~ 0
CS
Text GLabel 2450 2500 0    50   Input ~ 0
DIO0
Text GLabel 2450 2700 0    50   Input ~ 0
LIGHT_LIVING
Text GLabel 2450 3300 0    50   Input ~ 0
LIGHT_BATH
$Comp
L power:GND #PWR?
U 1 1 60E7A464
P 3050 3750
F 0 "#PWR?" H 3050 3500 50  0001 C CNN
F 1 "GND" H 3055 3577 50  0000 C CNN
F 2 "" H 3050 3750 50  0001 C CNN
F 3 "" H 3050 3750 50  0001 C CNN
	1    3050 3750
	1    0    0    -1  
$EndComp
Wire Wire Line
	3050 3750 3050 3500
Wire Wire Line
	2950 3500 3050 3500
Connection ~ 3050 3500
$Comp
L power:+3.3V #PWR?
U 1 1 60E7AF63
P 2950 1600
F 0 "#PWR?" H 2950 1450 50  0001 C CNN
F 1 "+3.3V" H 2965 1773 50  0000 C CNN
F 2 "" H 2950 1600 50  0001 C CNN
F 3 "" H 2950 1600 50  0001 C CNN
	1    2950 1600
	1    0    0    -1  
$EndComp
Wire Wire Line
	2950 1600 3050 1600
Connection ~ 2950 1600
Wire Wire Line
	3050 1600 3150 1600
Connection ~ 3050 1600
Text GLabel 6650 1250 0    50   Input ~ 0
LIGHT_LIVING
$Comp
L Device:R R3
U 1 1 60E84D06
P 8400 1800
F 0 "R3" H 8470 1846 50  0000 L CNN
F 1 "1k" H 8470 1755 50  0000 L CNN
F 2 "" V 8330 1800 50  0001 C CNN
F 3 "~" H 8400 1800 50  0001 C CNN
	1    8400 1800
	1    0    0    -1  
$EndComp
$Comp
L Device:LED D_Bath
U 1 1 60E84D0C
P 8400 1500
F 0 "D_Bath" V 8439 1382 50  0000 R CNN
F 1 "LED" V 8348 1382 50  0000 R CNN
F 2 "" H 8400 1500 50  0001 C CNN
F 3 "~" H 8400 1500 50  0001 C CNN
	1    8400 1500
	0    -1   -1   0   
$EndComp
$Comp
L power:GND #PWR?
U 1 1 60E84D12
P 8400 1950
F 0 "#PWR?" H 8400 1700 50  0001 C CNN
F 1 "GND" H 8405 1777 50  0000 C CNN
F 2 "" H 8400 1950 50  0001 C CNN
F 3 "" H 8400 1950 50  0001 C CNN
	1    8400 1950
	1    0    0    -1  
$EndComp
$Comp
L Device:R R6
U 1 1 60E85A54
P 6300 3700
F 0 "R6" H 6370 3746 50  0000 L CNN
F 1 "1k" H 6370 3655 50  0000 L CNN
F 2 "" V 6230 3700 50  0001 C CNN
F 3 "~" H 6300 3700 50  0001 C CNN
	1    6300 3700
	1    0    0    -1  
$EndComp
$Comp
L Device:LED D_Bed
U 1 1 60E85A5A
P 6300 3400
F 0 "D_Bed" V 6339 3282 50  0000 R CNN
F 1 "LED" V 6248 3282 50  0000 R CNN
F 2 "" H 6300 3400 50  0001 C CNN
F 3 "~" H 6300 3400 50  0001 C CNN
	1    6300 3400
	0    -1   -1   0   
$EndComp
$Comp
L power:GND #PWR?
U 1 1 60E85A60
P 6300 3850
F 0 "#PWR?" H 6300 3600 50  0001 C CNN
F 1 "GND" H 6305 3677 50  0000 C CNN
F 2 "" H 6300 3850 50  0001 C CNN
F 3 "" H 6300 3850 50  0001 C CNN
	1    6300 3850
	1    0    0    -1  
$EndComp
Connection ~ 5400 1900
Wire Wire Line
	4950 1900 5400 1900
Wire Wire Line
	5100 2100 5100 2200
Wire Wire Line
	5400 2300 5400 2500
Wire Wire Line
	5400 2550 5400 2500
Connection ~ 5400 2500
$Comp
L Device:R R2.2
U 1 1 60E8C56D
P 4850 2100
F 0 "R2.2" V 4643 2100 50  0000 C CNN
F 1 "100" V 4734 2100 50  0000 C CNN
F 2 "" V 4780 2100 50  0001 C CNN
F 3 "~" H 4850 2100 50  0001 C CNN
	1    4850 2100
	0    1    1    0   
$EndComp
Connection ~ 5100 2100
Wire Wire Line
	4700 2100 4650 2100
Wire Wire Line
	5000 2100 5100 2100
Text GLabel 6300 2550 0    50   Input ~ 0
MOTION_LIVING
Wire Notes Line
	4400 2900 7050 2900
Text Notes 4450 1300 0    79   ~ 0
Livingroom
Text GLabel 8400 1250 0    50   Input ~ 0
LIGHT_BATH
Wire Wire Line
	8400 1250 8400 1350
Text GLabel 6300 3150 0    50   Input ~ 0
LIGHT_BED
Wire Wire Line
	6300 3150 6300 3250
$Comp
L Device:R R4
U 1 1 60E9DD11
P 9450 1800
F 0 "R4" H 9520 1846 50  0000 L CNN
F 1 "1k" H 9520 1755 50  0000 L CNN
F 2 "" V 9380 1800 50  0001 C CNN
F 3 "~" H 9450 1800 50  0001 C CNN
	1    9450 1800
	1    0    0    -1  
$EndComp
$Comp
L Device:LED D_flood
U 1 1 60E9DD17
P 9450 1500
F 0 "D_flood" V 9489 1382 50  0000 R CNN
F 1 "LED" V 9398 1382 50  0000 R CNN
F 2 "" H 9450 1500 50  0001 C CNN
F 3 "~" H 9450 1500 50  0001 C CNN
	1    9450 1500
	0    -1   -1   0   
$EndComp
$Comp
L power:GND #PWR?
U 1 1 60E9DD1D
P 9450 1950
F 0 "#PWR?" H 9450 1700 50  0001 C CNN
F 1 "GND" H 9455 1777 50  0000 C CNN
F 2 "" H 9450 1950 50  0001 C CNN
F 3 "" H 9450 1950 50  0001 C CNN
	1    9450 1950
	1    0    0    -1  
$EndComp
Wire Wire Line
	9450 1250 9450 1350
Text GLabel 9450 1250 0    50   Input ~ 0
FLOOD_ALARM
$Comp
L Device:R_POT RV1
U 1 1 60E9F0BC
P 9000 2500
F 0 "RV1" H 8930 2546 50  0000 R CNN
F 1 "10k" H 8930 2455 50  0000 R CNN
F 2 "" H 9000 2500 50  0001 C CNN
F 3 "~" H 9000 2500 50  0001 C CNN
	1    9000 2500
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 60EA471D
P 9000 2650
F 0 "#PWR?" H 9000 2400 50  0001 C CNN
F 1 "GND" H 9005 2477 50  0000 C CNN
F 2 "" H 9000 2650 50  0001 C CNN
F 3 "" H 9000 2650 50  0001 C CNN
	1    9000 2650
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR?
U 1 1 60EA52E2
P 9000 2050
F 0 "#PWR?" H 9000 1900 50  0001 C CNN
F 1 "+3.3V" H 9015 2223 50  0000 C CNN
F 2 "" H 9000 2050 50  0001 C CNN
F 3 "" H 9000 2050 50  0001 C CNN
	1    9000 2050
	1    0    0    -1  
$EndComp
$Comp
L Device:R R5
U 1 1 60EA5D94
P 9000 2200
F 0 "R5" H 9070 2246 50  0000 L CNN
F 1 "10k" H 9070 2155 50  0000 L CNN
F 2 "" V 8930 2200 50  0001 C CNN
F 3 "~" H 9000 2200 50  0001 C CNN
	1    9000 2200
	1    0    0    -1  
$EndComp
Text GLabel 9250 2500 2    50   Input ~ 0
HUMIDITY
Wire Wire Line
	9150 2500 9250 2500
$Comp
L Switch:SW_DPST_x2 SW_Bath
U 1 1 60EA9374
P 8200 2550
F 0 "SW_Bath" H 8200 2785 50  0000 C CNN
F 1 "SW_DPST" H 8200 2694 50  0000 C CNN
F 2 "" H 8200 2550 50  0001 C CNN
F 3 "~" H 8200 2550 50  0001 C CNN
	1    8200 2550
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 60EA937A
P 8400 2650
F 0 "#PWR?" H 8400 2400 50  0001 C CNN
F 1 "GND" H 8405 2477 50  0000 C CNN
F 2 "" H 8400 2650 50  0001 C CNN
F 3 "" H 8400 2650 50  0001 C CNN
	1    8400 2650
	1    0    0    -1  
$EndComp
Wire Wire Line
	8400 2550 8400 2650
Text GLabel 8000 2550 0    50   Input ~ 0
MOTION_BATH
Wire Notes Line
	9900 2900 9900 1150
Wire Notes Line
	7100 1150 7100 2900
Text Notes 7150 1300 0    79   ~ 0
Bathroom
Wire Notes Line
	7100 1150 9900 1150
Wire Notes Line
	7100 2900 9900 2900
$Comp
L Switch:SW_DPST_x2 SW_Bed
U 1 1 60EC22DA
P 6250 4500
F 0 "SW_Bed" H 6250 4735 50  0000 C CNN
F 1 "SW_DPST" H 6250 4644 50  0000 C CNN
F 2 "" H 6250 4500 50  0001 C CNN
F 3 "~" H 6250 4500 50  0001 C CNN
	1    6250 4500
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 60EC22E0
P 6450 4600
F 0 "#PWR?" H 6450 4350 50  0001 C CNN
F 1 "GND" H 6455 4427 50  0000 C CNN
F 2 "" H 6450 4600 50  0001 C CNN
F 3 "" H 6450 4600 50  0001 C CNN
	1    6450 4600
	1    0    0    -1  
$EndComp
Wire Wire Line
	6450 4500 6450 4600
Text GLabel 6050 4500 0    50   Input ~ 0
MOTION_BED
$Comp
L Switch:SW_DPST_x2 SW_Alarm
U 1 1 60EC3379
P 5200 4500
F 0 "SW_Alarm" H 5200 4735 50  0000 C CNN
F 1 "SW_DPST" H 5200 4644 50  0000 C CNN
F 2 "" H 5200 4500 50  0001 C CNN
F 3 "~" H 5200 4500 50  0001 C CNN
	1    5200 4500
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 60EC337F
P 5400 4600
F 0 "#PWR?" H 5400 4350 50  0001 C CNN
F 1 "GND" H 5405 4427 50  0000 C CNN
F 2 "" H 5400 4600 50  0001 C CNN
F 3 "" H 5400 4600 50  0001 C CNN
	1    5400 4600
	1    0    0    -1  
$EndComp
Wire Wire Line
	5400 4500 5400 4600
Text GLabel 5000 4500 0    50   Input ~ 0
BUZZER_OFF
$Comp
L Device:Buzzer BZ1
U 1 1 60EC4435
P 5600 3500
F 0 "BZ1" H 5752 3529 50  0000 L CNN
F 1 "Buzzer" H 5752 3438 50  0000 L CNN
F 2 "" V 5575 3600 50  0001 C CNN
F 3 "~" V 5575 3600 50  0001 C CNN
	1    5600 3500
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 60EC5596
P 5500 4000
F 0 "#PWR?" H 5500 3750 50  0001 C CNN
F 1 "GND" H 5505 3827 50  0000 C CNN
F 2 "" H 5500 4000 50  0001 C CNN
F 3 "" H 5500 4000 50  0001 C CNN
	1    5500 4000
	1    0    0    -1  
$EndComp
Text GLabel 4900 3800 0    50   Input ~ 0
BUZZER
Text Notes 4450 3100 0    79   ~ 0
Bedroom\n
Wire Notes Line
	4400 2950 6750 2950
Wire Notes Line
	6750 2950 6750 4850
Wire Notes Line
	6750 4850 4400 4850
Wire Notes Line
	4400 2950 4400 4850
Text Notes 6850 3100 0    79   ~ 0
Radio Module\n
Wire Notes Line
	6800 2950 8800 2950
Wire Notes Line
	8800 2950 8800 4650
Wire Notes Line
	8800 4650 6800 4650
Wire Notes Line
	6800 4650 6800 2950
Text Notes 1700 1300 0    79   ~ 0
STM32F303K8
Wire Notes Line
	1650 4100 4350 4100
Wire Notes Line
	4350 4100 4350 1150
Wire Notes Line
	1650 1150 4350 1150
$Comp
L Device:Q_NPN_CBE Q1
U 1 1 60EC2B5E
P 5400 3800
F 0 "Q1" H 5591 3846 50  0000 L CNN
F 1 "Q_NPN_CBE" H 5591 3755 50  0000 L CNN
F 2 "" H 5600 3900 50  0001 C CNN
F 3 "~" H 5400 3800 50  0001 C CNN
	1    5400 3800
	1    0    0    -1  
$EndComp
$Comp
L power:+5V #PWR?
U 1 1 60EC779E
P 5500 3300
F 0 "#PWR?" H 5500 3150 50  0001 C CNN
F 1 "+5V" H 5515 3473 50  0000 C CNN
F 2 "" H 5500 3300 50  0001 C CNN
F 3 "" H 5500 3300 50  0001 C CNN
	1    5500 3300
	1    0    0    -1  
$EndComp
Wire Wire Line
	5500 3300 5500 3400
$Comp
L Device:R R6.1
U 1 1 60ED0E31
P 5050 3800
F 0 "R6.1" V 4843 3800 50  0000 C CNN
F 1 "10k" V 4934 3800 50  0000 C CNN
F 2 "" V 4980 3800 50  0001 C CNN
F 3 "~" H 5050 3800 50  0001 C CNN
	1    5050 3800
	0    1    1    0   
$EndComp
Wire Notes Line
	1650 1150 1650 4100
Text GLabel 2450 3200 0    50   Input ~ 0
LIGHT_BED
$Comp
L RF_Module:RFM95W-868S2 U2
U 1 1 61830682
P 7900 3750
F 0 "U2" H 7900 4431 50  0000 C CNN
F 1 "RFM95W-868S2" H 7900 4340 50  0000 C CNN
F 2 "" H 4600 5400 50  0001 C CNN
F 3 "https://www.hoperf.com/data/upload/portal/20181127/5bfcbea20e9ef.pdf" H 4600 5400 50  0001 C CNN
	1    7900 3750
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR?
U 1 1 60ECF864
P 8350 3250
F 0 "#PWR?" H 8350 3100 50  0001 C CNN
F 1 "+3.3V" H 8365 3423 50  0000 C CNN
F 2 "" H 8350 3250 50  0001 C CNN
F 3 "" H 8350 3250 50  0001 C CNN
	1    8350 3250
	1    0    0    -1  
$EndComp
Text GLabel 7400 3450 0    50   Input ~ 0
SPI1_SCK
Text GLabel 7400 3650 0    50   Input ~ 0
SPI1_MISO
Text GLabel 7400 3550 0    50   Input ~ 0
SPI1_MOSI
Text GLabel 7400 3950 0    50   Input ~ 0
RST
Text GLabel 7400 3750 0    50   Input ~ 0
CS
$Comp
L power:GND #PWR?
U 1 1 6183A380
P 8000 4350
F 0 "#PWR?" H 8000 4100 50  0001 C CNN
F 1 "GND" H 8005 4177 50  0000 C CNN
F 2 "" H 8000 4350 50  0001 C CNN
F 3 "" H 8000 4350 50  0001 C CNN
	1    8000 4350
	1    0    0    -1  
$EndComp
Wire Wire Line
	8350 3250 7900 3250
Wire Wire Line
	7800 4350 7900 4350
Wire Wire Line
	7900 4350 8000 4350
Connection ~ 7900 4350
Connection ~ 8000 4350
Text GLabel 8400 4150 2    50   Input ~ 0
DIO0
Wire Wire Line
	6650 1250 6650 1350
Wire Notes Line
	7050 1150 7050 2900
Wire Notes Line
	4400 2900 4400 1150
Wire Notes Line
	4400 1150 7050 1150
$EndSCHEMATC
