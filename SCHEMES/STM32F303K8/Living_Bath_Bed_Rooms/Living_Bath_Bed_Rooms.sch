EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 1
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L MCU_ST_STM32F3:STM32F303K8Tx U1
U 1 1 60E6B2B7
P 2750 2950
F 0 "U1" H 2700 1861 50  0000 C CNN
F 1 "STM32F303K8Tx" H 2700 1770 50  0000 C CNN
F 2 "Package_QFP:LQFP-32_7x7mm_P0.8mm" H 2250 2050 50  0001 R CNN
F 3 "http://www.st.com/st-web-ui/static/active/en/resource/technical/document/datasheet/DM00092070.pdf" H 2750 2950 50  0001 C CNN
	1    2750 2950
	1    0    0    -1  
$EndComp
$Comp
L Motor:Motor_DC M1
U 1 1 60E6DE2C
P 5400 1850
F 0 "M1" H 5558 1846 50  0000 L CNN
F 1 "Ceiling_Fan" H 5558 1755 50  0000 L CNN
F 2 "" H 5400 1760 50  0001 C CNN
F 3 "~" H 5400 1760 50  0001 C CNN
	1    5400 1850
	1    0    0    -1  
$EndComp
$Comp
L Device:D_Schottky D1
U 1 1 60E6E573
P 4950 1900
F 0 "D1" V 4904 1980 50  0000 L CNN
F 1 "D_Sch" V 4995 1980 50  0000 L CNN
F 2 "" H 4950 1900 50  0001 C CNN
F 3 "~" H 4950 1900 50  0001 C CNN
	1    4950 1900
	0    1    1    0   
$EndComp
$Comp
L Device:Q_NMOS_DGS Q1
U 1 1 60E6F272
P 5300 2350
F 0 "Q1" H 5504 2396 50  0000 L CNN
F 1 "Q_NMOS_DGS" H 5504 2305 50  0000 L CNN
F 2 "" H 5500 2450 50  0001 C CNN
F 3 "~" H 5300 2350 50  0001 C CNN
	1    5300 2350
	1    0    0    -1  
$EndComp
$Comp
L Device:R R1
U 1 1 60E6FFDB
P 6650 1950
F 0 "R1" H 6720 1996 50  0000 L CNN
F 1 "1k" H 6720 1905 50  0000 L CNN
F 2 "" V 6580 1950 50  0001 C CNN
F 3 "~" H 6650 1950 50  0001 C CNN
	1    6650 1950
	1    0    0    -1  
$EndComp
$Comp
L Device:LED D_Liv
U 1 1 60E7063E
P 6650 1650
F 0 "D_Liv" V 6689 1532 50  0000 R CNN
F 1 "LED" V 6598 1532 50  0000 R CNN
F 2 "" H 6650 1650 50  0001 C CNN
F 3 "~" H 6650 1650 50  0001 C CNN
	1    6650 1650
	0    -1   -1   0   
$EndComp
$Comp
L power:+3.3V #PWR?
U 1 1 60E7132A
P 5400 1650
F 0 "#PWR?" H 5400 1500 50  0001 C CNN
F 1 "+3.3V" H 5415 1823 50  0000 C CNN
F 2 "" H 5400 1650 50  0001 C CNN
F 3 "" H 5400 1650 50  0001 C CNN
	1    5400 1650
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 60E72096
P 6650 2100
F 0 "#PWR?" H 6650 1850 50  0001 C CNN
F 1 "GND" H 6655 1927 50  0000 C CNN
F 2 "" H 6650 2100 50  0001 C CNN
F 3 "" H 6650 2100 50  0001 C CNN
	1    6650 2100
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 60E725B3
P 5400 2800
F 0 "#PWR?" H 5400 2550 50  0001 C CNN
F 1 "GND" H 5405 2627 50  0000 C CNN
F 2 "" H 5400 2800 50  0001 C CNN
F 3 "" H 5400 2800 50  0001 C CNN
	1    5400 2800
	1    0    0    -1  
$EndComp
Wire Wire Line
	4950 1650 4950 1750
Wire Wire Line
	4950 2050 4950 2150
$Comp
L Switch:SW_DPST_x2 SW_Liv
U 1 1 60E7409A
P 6600 2700
F 0 "SW_Liv" H 6600 2935 50  0000 C CNN
F 1 "SW_DPST" H 6600 2844 50  0000 C CNN
F 2 "" H 6600 2700 50  0001 C CNN
F 3 "~" H 6600 2700 50  0001 C CNN
	1    6600 2700
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 60E75212
P 6800 2800
F 0 "#PWR?" H 6800 2550 50  0001 C CNN
F 1 "GND" H 6805 2627 50  0000 C CNN
F 2 "" H 6800 2800 50  0001 C CNN
F 3 "" H 6800 2800 50  0001 C CNN
	1    6800 2800
	1    0    0    -1  
$EndComp
Wire Wire Line
	6800 2700 6800 2800
Wire Wire Line
	4950 1650 5400 1650
Connection ~ 5400 1650
Text GLabel 4650 2350 0    50   Input ~ 0
FAN
$Comp
L Device:R R2
U 1 1 60E774C7
P 5100 2600
F 0 "R2" H 5170 2646 50  0000 L CNN
F 1 "10k" H 5170 2555 50  0000 L CNN
F 2 "" V 5030 2600 50  0001 C CNN
F 3 "~" H 5100 2600 50  0001 C CNN
	1    5100 2600
	1    0    0    -1  
$EndComp
Wire Wire Line
	5100 2750 5400 2750
Text GLabel 3250 2350 2    50   Input ~ 0
FAN
Text GLabel 3250 2250 2    50   Input ~ 0
BUZZER
Text GLabel 3250 2450 2    50   Input ~ 0
CS_NRF
Text GLabel 3250 2550 2    50   Input ~ 0
FLOOD_ALARM
Text GLabel 3250 2650 2    50   Input ~ 0
HUMIDITY
Text GLabel 3250 2750 2    50   Input ~ 0
SPI1_SCK
Text GLabel 3250 2850 2    50   Input ~ 0
SPI1_MISO
Text GLabel 3250 2950 2    50   Input ~ 0
SPI1_MOSI
Text GLabel 3250 3050 2    50   Input ~ 0
TxEN
Text GLabel 3250 3350 2    50   Input ~ 0
DR
Text GLabel 3250 3450 2    50   Input ~ 0
BUZZER_OFF
Text GLabel 2150 2850 0    50   Input ~ 0
MOTION_BATH
Text GLabel 2150 2950 0    50   Input ~ 0
MOTION_LIVING
Text GLabel 2150 3150 0    50   Input ~ 0
LIGHT_BED
Text GLabel 2150 3250 0    50   Input ~ 0
MOTION_BED
Text GLabel 2150 3450 0    50   Input ~ 0
CD
Text GLabel 2150 3550 0    50   Input ~ 0
AM
Text GLabel 2150 3650 0    50   Input ~ 0
LIGHT_LIVING
Text GLabel 2150 3750 0    50   Input ~ 0
LIGHT_BATH
$Comp
L power:GND #PWR?
U 1 1 60E7A464
P 2750 4200
F 0 "#PWR?" H 2750 3950 50  0001 C CNN
F 1 "GND" H 2755 4027 50  0000 C CNN
F 2 "" H 2750 4200 50  0001 C CNN
F 3 "" H 2750 4200 50  0001 C CNN
	1    2750 4200
	1    0    0    -1  
$EndComp
Wire Wire Line
	2750 4200 2750 3950
Wire Wire Line
	2650 3950 2750 3950
Connection ~ 2750 3950
$Comp
L power:+3.3V #PWR?
U 1 1 60E7AF63
P 2650 2050
F 0 "#PWR?" H 2650 1900 50  0001 C CNN
F 1 "+3.3V" H 2665 2223 50  0000 C CNN
F 2 "" H 2650 2050 50  0001 C CNN
F 3 "" H 2650 2050 50  0001 C CNN
	1    2650 2050
	1    0    0    -1  
$EndComp
Wire Wire Line
	2650 2050 2750 2050
Connection ~ 2650 2050
Wire Wire Line
	2750 2050 2850 2050
Connection ~ 2750 2050
Text GLabel 6650 1300 0    50   Input ~ 0
LIGHT_LIVING
Wire Wire Line
	6650 1500 6650 1300
$Comp
L Device:R R3
U 1 1 60E84D06
P 8750 1800
F 0 "R3" H 8820 1846 50  0000 L CNN
F 1 "1k" H 8820 1755 50  0000 L CNN
F 2 "" V 8680 1800 50  0001 C CNN
F 3 "~" H 8750 1800 50  0001 C CNN
	1    8750 1800
	1    0    0    -1  
$EndComp
$Comp
L Device:LED D_Bath
U 1 1 60E84D0C
P 8750 1500
F 0 "D_Bath" V 8789 1382 50  0000 R CNN
F 1 "LED" V 8698 1382 50  0000 R CNN
F 2 "" H 8750 1500 50  0001 C CNN
F 3 "~" H 8750 1500 50  0001 C CNN
	1    8750 1500
	0    -1   -1   0   
$EndComp
$Comp
L power:GND #PWR?
U 1 1 60E84D12
P 8750 1950
F 0 "#PWR?" H 8750 1700 50  0001 C CNN
F 1 "GND" H 8755 1777 50  0000 C CNN
F 2 "" H 8750 1950 50  0001 C CNN
F 3 "" H 8750 1950 50  0001 C CNN
	1    8750 1950
	1    0    0    -1  
$EndComp
$Comp
L Device:R R6
U 1 1 60E85A54
P 6450 4300
F 0 "R6" H 6520 4346 50  0000 L CNN
F 1 "1k" H 6520 4255 50  0000 L CNN
F 2 "" V 6380 4300 50  0001 C CNN
F 3 "~" H 6450 4300 50  0001 C CNN
	1    6450 4300
	1    0    0    -1  
$EndComp
$Comp
L Device:LED D_Bed
U 1 1 60E85A5A
P 6450 4000
F 0 "D_Bed" V 6489 3882 50  0000 R CNN
F 1 "LED" V 6398 3882 50  0000 R CNN
F 2 "" H 6450 4000 50  0001 C CNN
F 3 "~" H 6450 4000 50  0001 C CNN
	1    6450 4000
	0    -1   -1   0   
$EndComp
$Comp
L power:GND #PWR?
U 1 1 60E85A60
P 6450 4450
F 0 "#PWR?" H 6450 4200 50  0001 C CNN
F 1 "GND" H 6455 4277 50  0000 C CNN
F 2 "" H 6450 4450 50  0001 C CNN
F 3 "" H 6450 4450 50  0001 C CNN
	1    6450 4450
	1    0    0    -1  
$EndComp
Connection ~ 5400 2150
Wire Wire Line
	4950 2150 5400 2150
Wire Wire Line
	5100 2350 5100 2450
Wire Wire Line
	5400 2550 5400 2750
Wire Wire Line
	5400 2800 5400 2750
Connection ~ 5400 2750
$Comp
L Device:R R2.2
U 1 1 60E8C56D
P 4850 2350
F 0 "R2.2" V 4643 2350 50  0000 C CNN
F 1 "100" V 4734 2350 50  0000 C CNN
F 2 "" V 4780 2350 50  0001 C CNN
F 3 "~" H 4850 2350 50  0001 C CNN
	1    4850 2350
	0    1    1    0   
$EndComp
Connection ~ 5100 2350
Wire Wire Line
	4700 2350 4650 2350
Wire Wire Line
	5000 2350 5100 2350
Text GLabel 6400 2700 0    50   Input ~ 0
MOTION_LIVING
Wire Notes Line
	7050 1150 4400 1150
Wire Notes Line
	4400 1150 4400 3050
Wire Notes Line
	4400 3050 7050 3050
Wire Notes Line
	7050 1150 7050 3050
Text Notes 4450 1300 0    79   ~ 0
Livingroom
Text GLabel 8750 1250 0    50   Input ~ 0
LIGHT_BATH
Wire Wire Line
	8750 1250 8750 1350
Text GLabel 6450 3750 0    50   Input ~ 0
LIGHT_BED
Wire Wire Line
	6450 3750 6450 3850
$Comp
L Device:R R4
U 1 1 60E9DD11
P 9800 1800
F 0 "R4" H 9870 1846 50  0000 L CNN
F 1 "1k" H 9870 1755 50  0000 L CNN
F 2 "" V 9730 1800 50  0001 C CNN
F 3 "~" H 9800 1800 50  0001 C CNN
	1    9800 1800
	1    0    0    -1  
$EndComp
$Comp
L Device:LED D_flood
U 1 1 60E9DD17
P 9800 1500
F 0 "D_flood" V 9839 1382 50  0000 R CNN
F 1 "LED" V 9748 1382 50  0000 R CNN
F 2 "" H 9800 1500 50  0001 C CNN
F 3 "~" H 9800 1500 50  0001 C CNN
	1    9800 1500
	0    -1   -1   0   
$EndComp
$Comp
L power:GND #PWR?
U 1 1 60E9DD1D
P 9800 1950
F 0 "#PWR?" H 9800 1700 50  0001 C CNN
F 1 "GND" H 9805 1777 50  0000 C CNN
F 2 "" H 9800 1950 50  0001 C CNN
F 3 "" H 9800 1950 50  0001 C CNN
	1    9800 1950
	1    0    0    -1  
$EndComp
Wire Wire Line
	9800 1250 9800 1350
Text GLabel 9800 1250 0    50   Input ~ 0
FLOOD_ALARM
$Comp
L Device:R_POT RV1
U 1 1 60E9F0BC
P 9350 2500
F 0 "RV1" H 9280 2546 50  0000 R CNN
F 1 "10k" H 9280 2455 50  0000 R CNN
F 2 "" H 9350 2500 50  0001 C CNN
F 3 "~" H 9350 2500 50  0001 C CNN
	1    9350 2500
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 60EA471D
P 9350 2650
F 0 "#PWR?" H 9350 2400 50  0001 C CNN
F 1 "GND" H 9355 2477 50  0000 C CNN
F 2 "" H 9350 2650 50  0001 C CNN
F 3 "" H 9350 2650 50  0001 C CNN
	1    9350 2650
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR?
U 1 1 60EA52E2
P 9350 2050
F 0 "#PWR?" H 9350 1900 50  0001 C CNN
F 1 "+3.3V" H 9365 2223 50  0000 C CNN
F 2 "" H 9350 2050 50  0001 C CNN
F 3 "" H 9350 2050 50  0001 C CNN
	1    9350 2050
	1    0    0    -1  
$EndComp
$Comp
L Device:R R5
U 1 1 60EA5D94
P 9350 2200
F 0 "R5" H 9420 2246 50  0000 L CNN
F 1 "1k" H 9420 2155 50  0000 L CNN
F 2 "" V 9280 2200 50  0001 C CNN
F 3 "~" H 9350 2200 50  0001 C CNN
	1    9350 2200
	1    0    0    -1  
$EndComp
Text GLabel 9600 2500 2    50   Input ~ 0
HUMIDITY
Wire Wire Line
	9500 2500 9600 2500
$Comp
L Switch:SW_DPST_x2 SW_Bath
U 1 1 60EA9374
P 8550 2550
F 0 "SW_Bath" H 8550 2785 50  0000 C CNN
F 1 "SW_DPST" H 8550 2694 50  0000 C CNN
F 2 "" H 8550 2550 50  0001 C CNN
F 3 "~" H 8550 2550 50  0001 C CNN
	1    8550 2550
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 60EA937A
P 8750 2650
F 0 "#PWR?" H 8750 2400 50  0001 C CNN
F 1 "GND" H 8755 2477 50  0000 C CNN
F 2 "" H 8750 2650 50  0001 C CNN
F 3 "" H 8750 2650 50  0001 C CNN
	1    8750 2650
	1    0    0    -1  
$EndComp
Wire Wire Line
	8750 2550 8750 2650
Text GLabel 8350 2550 0    50   Input ~ 0
MOTION_BATH
Wire Notes Line
	10250 2900 10250 1150
Wire Notes Line
	7450 1150 7450 2900
Text Notes 7500 1300 0    79   ~ 0
Bathroom
Wire Notes Line
	7450 1150 10250 1150
Wire Notes Line
	7450 2900 10250 2900
$Comp
L Switch:SW_DPST_x2 SW_Bed
U 1 1 60EC22DA
P 6400 5100
F 0 "SW_Bed" H 6400 5335 50  0000 C CNN
F 1 "SW_DPST" H 6400 5244 50  0000 C CNN
F 2 "" H 6400 5100 50  0001 C CNN
F 3 "~" H 6400 5100 50  0001 C CNN
	1    6400 5100
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 60EC22E0
P 6600 5200
F 0 "#PWR?" H 6600 4950 50  0001 C CNN
F 1 "GND" H 6605 5027 50  0000 C CNN
F 2 "" H 6600 5200 50  0001 C CNN
F 3 "" H 6600 5200 50  0001 C CNN
	1    6600 5200
	1    0    0    -1  
$EndComp
Wire Wire Line
	6600 5100 6600 5200
Text GLabel 6200 5100 0    50   Input ~ 0
MOTION_BED
$Comp
L Switch:SW_DPST_x2 SW_Alarm
U 1 1 60EC3379
P 5350 5100
F 0 "SW_Alarm" H 5350 5335 50  0000 C CNN
F 1 "SW_DPST" H 5350 5244 50  0000 C CNN
F 2 "" H 5350 5100 50  0001 C CNN
F 3 "~" H 5350 5100 50  0001 C CNN
	1    5350 5100
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 60EC337F
P 5550 5200
F 0 "#PWR?" H 5550 4950 50  0001 C CNN
F 1 "GND" H 5555 5027 50  0000 C CNN
F 2 "" H 5550 5200 50  0001 C CNN
F 3 "" H 5550 5200 50  0001 C CNN
	1    5550 5200
	1    0    0    -1  
$EndComp
Wire Wire Line
	5550 5100 5550 5200
Text GLabel 5150 5100 0    50   Input ~ 0
BUZZER_OFF
$Comp
L Device:Buzzer BZ1
U 1 1 60EC4435
P 5750 4100
F 0 "BZ1" H 5902 4129 50  0000 L CNN
F 1 "Buzzer" H 5902 4038 50  0000 L CNN
F 2 "" V 5725 4200 50  0001 C CNN
F 3 "~" V 5725 4200 50  0001 C CNN
	1    5750 4100
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 60EC5596
P 5650 4600
F 0 "#PWR?" H 5650 4350 50  0001 C CNN
F 1 "GND" H 5655 4427 50  0000 C CNN
F 2 "" H 5650 4600 50  0001 C CNN
F 3 "" H 5650 4600 50  0001 C CNN
	1    5650 4600
	1    0    0    -1  
$EndComp
Text GLabel 5050 4400 0    50   Input ~ 0
BUZZER
Text Notes 4600 3700 0    79   ~ 0
Bedroom\n
Wire Notes Line
	4550 3550 6900 3550
Wire Notes Line
	6900 3550 6900 5450
Wire Notes Line
	6900 5450 4550 5450
Wire Notes Line
	4550 3550 4550 5450
$Comp
L Living_Bath_Bed_Rooms-rescue:nRF905-nrf_custom2 n1
U 1 1 60EC89FE
P 9050 4300
F 0 "n1" H 9050 4465 50  0000 C CNN
F 1 "nRF905" H 9050 4374 50  0000 C CNN
F 2 "" H 9050 4400 50  0001 C CNN
F 3 "" H 9050 4400 50  0001 C CNN
	1    9050 4300
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 60ECDF57
P 9050 5050
F 0 "#PWR?" H 9050 4800 50  0001 C CNN
F 1 "GND" H 9055 4877 50  0000 C CNN
F 2 "" H 9050 5050 50  0001 C CNN
F 3 "" H 9050 5050 50  0001 C CNN
	1    9050 5050
	1    0    0    -1  
$EndComp
Wire Wire Line
	8750 4950 8700 4950
Wire Wire Line
	8700 4950 8700 5050
Wire Wire Line
	8700 5050 9050 5050
Wire Wire Line
	9350 4950 9400 4950
Wire Wire Line
	9400 4950 9400 5050
Wire Wire Line
	9400 5050 9050 5050
Connection ~ 9050 5050
$Comp
L power:+3.3V #PWR?
U 1 1 60ECF864
P 8700 4050
F 0 "#PWR?" H 8700 3900 50  0001 C CNN
F 1 "+3.3V" H 8715 4223 50  0000 C CNN
F 2 "" H 8700 4050 50  0001 C CNN
F 3 "" H 8700 4050 50  0001 C CNN
	1    8700 4050
	1    0    0    -1  
$EndComp
Wire Wire Line
	8700 4350 8750 4350
Text GLabel 8750 4850 0    50   Input ~ 0
SPI1_SCK
Text GLabel 8750 4750 0    50   Input ~ 0
SPI1_MISO
Text GLabel 9350 4750 2    50   Input ~ 0
SPI1_MOSI
Text GLabel 9350 4550 2    50   Input ~ 0
CD
Text GLabel 8750 4650 0    50   Input ~ 0
AM
Text GLabel 9350 4850 2    50   Input ~ 0
CS_NRF
Text GLabel 9350 4350 2    50   Input ~ 0
TxEN
Text GLabel 9350 4650 2    50   Input ~ 0
DR
Text Notes 7950 3800 0    79   ~ 0
Radio Module\n
Wire Notes Line
	7900 3650 9900 3650
Wire Notes Line
	9900 3650 9900 5350
Wire Notes Line
	9900 5350 7900 5350
Wire Notes Line
	7900 5350 7900 3650
Text Notes 1400 1750 0    79   ~ 0
STM32F303K8
Wire Notes Line
	1350 1600 1350 4550
Wire Notes Line
	1350 4550 4050 4550
Wire Notes Line
	4050 4550 4050 1600
Wire Notes Line
	1350 1600 4050 1600
$Comp
L Device:Q_NPN_CBE Q1
U 1 1 60EC2B5E
P 5550 4400
F 0 "Q1" H 5741 4446 50  0000 L CNN
F 1 "Q_NPN_CBE" H 5741 4355 50  0000 L CNN
F 2 "" H 5750 4500 50  0001 C CNN
F 3 "~" H 5550 4400 50  0001 C CNN
	1    5550 4400
	1    0    0    -1  
$EndComp
$Comp
L power:+5V #PWR?
U 1 1 60EC779E
P 5650 3900
F 0 "#PWR?" H 5650 3750 50  0001 C CNN
F 1 "+5V" H 5665 4073 50  0000 C CNN
F 2 "" H 5650 3900 50  0001 C CNN
F 3 "" H 5650 3900 50  0001 C CNN
	1    5650 3900
	1    0    0    -1  
$EndComp
Wire Wire Line
	5650 3900 5650 4000
$Comp
L Device:R R6.1
U 1 1 60ED0E31
P 5200 4400
F 0 "R6.1" V 4993 4400 50  0000 C CNN
F 1 "10k" V 5084 4400 50  0000 C CNN
F 2 "" V 5130 4400 50  0001 C CNN
F 3 "~" H 5200 4400 50  0001 C CNN
	1    5200 4400
	0    1    1    0   
$EndComp
Wire Wire Line
	8700 4050 8700 4350
Text GLabel 8750 4450 0    50   Input ~ 0
CE
Text GLabel 9350 4450 2    50   Input ~ 0
PWR
$EndSCHEMATC
